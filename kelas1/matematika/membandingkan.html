<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Membandingkan Banyak Benda - Kelas 1 SD</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Font Poppins & Fredoka -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&family=Fredoka:wght@500;700&display=swap" rel="stylesheet">
    
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        body { 
            font-family: 'Poppins', sans-serif; 
            background-color: #f0fdf4; /* Light Green background */
            background-image: radial-gradient(#86efac 2px, transparent 2px);
            background-size: 24px 24px;
            user-select: none; 
            -webkit-user-select: none;
        }
        .font-kids { font-family: 'Fredoka', sans-serif; }
        
        @keyframes bounce-slow {
            0%, 100% { transform: translateY(-5%); }
            50% { transform: translateY(5%); }
        }
        .animate-bounce-slow { animation: bounce-slow 2s infinite; }

        @keyframes popIn {
            0% { transform: scale(0); opacity: 0; }
            80% { transform: scale(1.1); opacity: 1; }
            100% { transform: scale(1); opacity: 1; }
        }
        .animate-pop { animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        .animate-shake { animation: shake 0.4s ease-in-out; }

        /* Custom Card Styles */
        .card-hover:hover { transform: translateY(-4px); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- ASSETS (SVG ICONS) ---
        const Icons = {
            Apple: () => (
                <svg viewBox="0 0 100 100" className="w-12 h-12 md:w-16 md:h-16 drop-shadow-sm inline-block m-1">
                    <path d="M50 15 Q 60 0 75 10 Q 95 25 85 55 Q 80 90 50 90 Q 20 90 15 55 Q 5 25 25 10 Q 40 0 50 15" fill="#ef4444" />
                    <path d="M50 15 Q 50 0 55 5" stroke="#3f6212" strokeWidth="3" fill="none" />
                    <path d="M50 15 Q 65 5 65 20 Q 55 25 50 15" fill="#4ade80" />
                    <circle cx="35" cy="40" r="3" fill="rgba(255,255,255,0.3)" />
                </svg>
            ),
            Orange: () => (
                <svg viewBox="0 0 100 100" className="w-12 h-12 md:w-16 md:h-16 drop-shadow-sm inline-block m-1">
                    <circle cx="50" cy="55" r="40" fill="#f97316" />
                    <circle cx="50" cy="55" r="35" fill="none" stroke="#fb923c" strokeWidth="2" strokeDasharray="5,5" />
                    <path d="M50 15 Q 65 5 65 20 Q 55 25 50 15" fill="#4ade80" />
                    <circle cx="30" cy="45" r="4" fill="rgba(255,255,255,0.3)" />
                </svg>
            ),
            Cookie: () => (
                <svg viewBox="0 0 100 100" className="w-12 h-12 md:w-16 md:h-16 drop-shadow-sm inline-block m-1">
                    <circle cx="50" cy="50" r="40" fill="#d4a373" />
                    <circle cx="30" cy="40" r="5" fill="#78350f" />
                    <circle cx="60" cy="30" r="5" fill="#78350f" />
                    <circle cx="50" cy="60" r="5" fill="#78350f" />
                    <circle cx="70" cy="55" r="5" fill="#78350f" />
                    <circle cx="35" cy="70" r="5" fill="#78350f" />
                </svg>
            ),
            Donut: () => (
                <svg viewBox="0 0 100 100" className="w-12 h-12 md:w-16 md:h-16 drop-shadow-sm inline-block m-1">
                    <circle cx="50" cy="50" r="40" fill="#fcd34d" />
                    <path d="M50 50 m -25, 0 a 25,25 0 1,0 50,0 a 25,25 0 1,0 -50,0" fill="none" stroke="#ec4899" strokeWidth="15" />
                    <circle cx="50" cy="50" r="15" fill="#f0fdf4" />
                    <line x1="35" y1="35" x2="40" y2="30" stroke="white" strokeWidth="3" />
                    <line x1="60" y1="35" x2="65" y2="40" stroke="white" strokeWidth="3" />
                    <line x1="50" y1="70" x2="50" y2="75" stroke="white" strokeWidth="3" />
                </svg>
            ),
            Star: () => (
                <svg viewBox="0 0 100 100" className="w-12 h-12 md:w-16 md:h-16 drop-shadow-sm inline-block m-1">
                    <polygon points="50,10 61,40 95,40 67,60 78,90 50,70 22,90 33,60 5,40 39,40" fill="#fbbf24" stroke="#f59e0b" strokeWidth="2" />
                </svg>
            ),
            Heart: () => (
                <svg viewBox="0 0 100 100" className="w-12 h-12 md:w-16 md:h-16 drop-shadow-sm inline-block m-1">
                    <path d="M50 85 C50 85 10 55 10 30 C10 15 25 5 40 10 C50 15 50 25 50 25 C50 25 50 15 60 10 C75 5 90 15 90 30 C90 55 50 85 50 85" fill="#f43f5e" stroke="#e11d48" strokeWidth="2" />
                    <circle cx="30" cy="30" r="4" fill="rgba(255,255,255,0.4)" />
                </svg>
            ),
            Candy: () => (
                <svg viewBox="0 0 100 100" className="w-12 h-12 md:w-16 md:h-16 drop-shadow-sm inline-block m-1">
                    <path d="M20 20 L40 40 L20 60 Z" fill="#f472b6" />
                    <path d="M80 20 L60 40 L80 60 Z" fill="#f472b6" />
                    <circle cx="50" cy="40" r="25" fill="#ec4899" stroke="#db2777" strokeWidth="2" />
                    <path d="M40 30 Q 50 50 60 30" stroke="white" strokeWidth="3" fill="none" />
                </svg>
            ),
            Flower: () => (
                <svg viewBox="0 0 100 100" className="w-12 h-12 md:w-16 md:h-16 drop-shadow-sm inline-block m-1">
                    <circle cx="50" cy="30" r="15" fill="#c084fc" />
                    <circle cx="70" cy="50" r="15" fill="#c084fc" />
                    <circle cx="50" cy="70" r="15" fill="#c084fc" />
                    <circle cx="30" cy="50" r="15" fill="#c084fc" />
                    <circle cx="50" cy="50" r="12" fill="#facc15" stroke="#eab308" strokeWidth="2" />
                </svg>
            ),
            Car: () => (
                <svg viewBox="0 0 100 100" className="w-12 h-12 md:w-16 md:h-16 drop-shadow-sm inline-block m-1">
                    <rect x="10" y="45" width="80" height="30" rx="5" fill="#3b82f6" />
                    <path d="M20 45 L30 20 L70 20 L80 45 Z" fill="#60a5fa" />
                    <circle cx="25" cy="75" r="10" fill="#374151" />
                    <circle cx="75" cy="75" r="10" fill="#374151" />
                    <circle cx="25" cy="75" r="4" fill="#9ca3af" />
                    <circle cx="75" cy="75" r="4" fill="#9ca3af" />
                </svg>
            ),
            Ball: () => (
                <svg viewBox="0 0 100 100" className="w-12 h-12 md:w-16 md:h-16 drop-shadow-sm inline-block m-1">
                    <circle cx="50" cy="50" r="40" fill="#f87171" stroke="#dc2626" strokeWidth="2" />
                    <path d="M10 50 Q 50 20 90 50" fill="none" stroke="white" strokeWidth="3" />
                    <path d="M10 50 Q 50 80 90 50" fill="none" stroke="white" strokeWidth="3" />
                </svg>
            ),
            Balloon: () => (
                <svg viewBox="0 0 100 100" className="w-12 h-12 md:w-16 md:h-16 drop-shadow-sm inline-block m-1">
                    <path d="M50 80 L50 95" stroke="#9ca3af" strokeWidth="2" />
                    <ellipse cx="50" cy="45" rx="35" ry="40" fill="#a78bfa" />
                    <ellipse cx="40" cy="30" rx="5" ry="8" fill="rgba(255,255,255,0.4)" transform="rotate(-30 40 30)" />
                    <polygon points="50,85 45,90 55,90" fill="#a78bfa" />
                </svg>
            ),
            Gift: () => (
                <svg viewBox="0 0 100 100" className="w-12 h-12 md:w-16 md:h-16 drop-shadow-sm inline-block m-1">
                    <rect x="20" y="40" width="60" height="50" fill="#f472b6" />
                    <rect x="45" y="40" width="10" height="50" fill="#facc15" />
                    <rect x="20" y="60" width="60" height="10" fill="#facc15" />
                    <path d="M50 40 Q 30 10 50 40 Q 70 10 50 40" stroke="#facc15" strokeWidth="5" fill="none" />
                </svg>
            )
        };

        // --- DATA SOAL (TOTAL 6 SCENARIOS) ---
        const SCENARIOS = [
            {
                id: 1,
                title: "Buah-buahan",
                groupA: { type: 'Apple', count: 3, label: 'A' },
                groupB: { type: 'Orange', count: 4, label: 'B' },
                questions: [
                    { 
                        text: "Benda mana yang jumlahnya LEBIH BANYAK?", 
                        correctGroup: 'B',
                        voice: "Benda mana yang jumlahnya lebih banyak?" 
                    },
                    { 
                        text: "Benda mana yang jumlahnya LEBIH SEDIKIT?", 
                        correctGroup: 'A',
                        voice: "Benda mana yang jumlahnya lebih sedikit?"
                    }
                ]
            },
            {
                id: 2,
                title: "Kue & Donat",
                groupA: { type: 'Cookie', count: 6, label: 'A' },
                groupB: { type: 'Donut', count: 5, label: 'B' },
                questions: [
                    { 
                        text: "Benda mana yang jumlahnya LEBIH BANYAK?", 
                        correctGroup: 'A',
                        voice: "Benda mana yang jumlahnya lebih banyak?"
                    },
                    { 
                        text: "Benda mana yang jumlahnya LEBIH SEDIKIT?", 
                        correctGroup: 'B',
                        voice: "Benda mana yang jumlahnya lebih sedikit?"
                    }
                ]
            },
            {
                id: 3,
                title: "Bintang & Hati",
                groupA: { type: 'Star', count: 7, label: 'A' },
                groupB: { type: 'Heart', count: 9, label: 'B' },
                questions: [
                    { 
                        text: "Benda mana yang jumlahnya LEBIH BANYAK?", 
                        correctGroup: 'B',
                        voice: "Benda mana yang jumlahnya lebih banyak?" 
                    },
                    { 
                        text: "Benda mana yang jumlahnya LEBIH SEDIKIT?", 
                        correctGroup: 'A',
                        voice: "Benda mana yang jumlahnya lebih sedikit?" 
                    }
                ]
            },
            {
                id: 4,
                title: "Permen & Bunga",
                groupA: { type: 'Candy', count: 8, label: 'A' },
                groupB: { type: 'Flower', count: 6, label: 'B' },
                questions: [
                    { 
                        text: "Benda mana yang jumlahnya LEBIH BANYAK?", 
                        correctGroup: 'A',
                        voice: "Benda mana yang jumlahnya lebih banyak?" 
                    },
                    { 
                        text: "Benda mana yang jumlahnya LEBIH SEDIKIT?", 
                        correctGroup: 'B',
                        voice: "Benda mana yang jumlahnya lebih sedikit?" 
                    }
                ]
            },
            {
                id: 5,
                title: "Mobil & Bola",
                groupA: { type: 'Car', count: 4, label: 'A' },
                groupB: { type: 'Ball', count: 5, label: 'B' },
                questions: [
                    { 
                        text: "Benda mana yang jumlahnya LEBIH BANYAK?", 
                        correctGroup: 'B',
                        voice: "Benda mana yang jumlahnya lebih banyak?" 
                    },
                    { 
                        text: "Benda mana yang jumlahnya LEBIH SEDIKIT?", 
                        correctGroup: 'A',
                        voice: "Benda mana yang jumlahnya lebih sedikit?" 
                    }
                ]
            },
            {
                id: 6,
                title: "Balon & Kado",
                groupA: { type: 'Balloon', count: 10, label: 'A' },
                groupB: { type: 'Gift', count: 8, label: 'B' },
                questions: [
                    { 
                        text: "Benda mana yang jumlahnya LEBIH BANYAK?", 
                        correctGroup: 'A',
                        voice: "Benda mana yang jumlahnya lebih banyak?" 
                    },
                    { 
                        text: "Benda mana yang jumlahnya LEBIH SEDIKIT?", 
                        correctGroup: 'B',
                        voice: "Benda mana yang jumlahnya lebih sedikit?" 
                    }
                ]
            }
        ];

        const speak = (text) => {
            if ('speechSynthesis' in window) {
                window.speechSynthesis.cancel();
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'id-ID';
                utterance.rate = 0.9; 
                utterance.pitch = 1.1; 
                window.speechSynthesis.speak(utterance);
            }
        };

        const App = () => {
            const [scenarioIdx, setScenarioIdx] = useState(0);
            const [questionIdx, setQuestionIdx] = useState(0);
            const [feedback, setFeedback] = useState(null); // 'correct', 'wrong', null
            const [showConfetti, setShowConfetti] = useState(false);

            const currentScenario = SCENARIOS[scenarioIdx];
            const currentQuestion = currentScenario.questions[questionIdx];

            // Auto-speak question when changed
            useEffect(() => {
                const timer = setTimeout(() => {
                    speak(currentQuestion.voice);
                }, 500);
                return () => clearTimeout(timer);
            }, [scenarioIdx, questionIdx]);

            const handleAnswer = (groupLabel) => {
                if (feedback) return; // Prevent double click

                if (groupLabel === currentQuestion.correctGroup) {
                    // BENAR
                    setFeedback('correct');
                    speak("Hebat! Jawabanmu benar.");
                    setShowConfetti(true);
                    
                    setTimeout(() => {
                        setShowConfetti(false);
                        setFeedback(null);
                        
                        // Next logic
                        if (questionIdx < currentScenario.questions.length - 1) {
                            setQuestionIdx(prev => prev + 1);
                        } else if (scenarioIdx < SCENARIOS.length - 1) {
                            setScenarioIdx(prev => prev + 1);
                            setQuestionIdx(0);
                        } else {
                            // Finish
                            setFeedback('finish');
                            speak("Luar biasa! Kamu sudah menyelesaikan semua soal.");
                        }
                    }, 2000);
                } else {
                    // SALAH
                    setFeedback('wrong');
                    speak("Coba lagi ya.");
                    setTimeout(() => setFeedback(null), 1500);
                }
            };

            const resetGame = () => {
                setScenarioIdx(0);
                setQuestionIdx(0);
                setFeedback(null);
            };

            const renderItems = (type, count) => {
                const Icon = Icons[type];
                return (
                    <div className="flex flex-wrap justify-center items-center gap-2">
                        {[...Array(count)].map((_, i) => (
                            <div key={i} className="animate-pop" style={{animationDelay: `${i * 100}ms`}}>
                                <Icon />
                            </div>
                        ))}
                    </div>
                );
            };

            if (feedback === 'finish') {
                return (
                    <div className="min-h-screen flex flex-col items-center justify-center bg-green-50 p-4 text-center">
                        <div className="animate-bounce-slow text-8xl mb-6">üèÜ</div>
                        <h1 className="font-kids text-4xl text-green-600 font-bold mb-4">Luar Biasa!</h1>
                        <p className="text-xl text-gray-600 mb-8">Kamu sudah menyelesaikan semua latihan.</p>
                        <button 
                            onClick={resetGame}
                            className="bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-8 rounded-full shadow-lg transform transition hover:scale-105"
                        >
                            Main Lagi
                        </button>
                    </div>
                );
            }

            return (
                <div className="min-h-screen flex flex-col items-center py-8 px-4 max-w-4xl mx-auto">
                    
                    {/* Header Info */}
                    <div className="w-full flex justify-between items-center mb-8 px-4">
                        <span className="bg-white px-4 py-2 rounded-full shadow-sm text-green-600 font-bold text-sm border border-green-200">
                            Soal {scenarioIdx + 1} / {SCENARIOS.length}
                        </span>
                        <h1 className="font-kids text-2xl md:text-3xl text-green-700 font-bold">
                            Bandingkan Benda
                        </h1>
                        <button onClick={() => speak(currentQuestion.voice)} className="bg-white p-3 rounded-full shadow-sm text-green-500 hover:bg-green-50 active:scale-95 transition">
                            <i className="fa-solid fa-volume-high text-xl"></i>
                        </button>
                    </div>

                    {/* Question Card */}
                    <div className="bg-white rounded-3xl p-6 md:p-8 shadow-xl border-4 border-green-200 w-full mb-8 relative overflow-hidden">
                        
                        {/* Overlay Feedback Correct */}
                        {showConfetti && (
                            <div className="absolute inset-0 pointer-events-none z-50 flex items-center justify-center bg-white/50 backdrop-blur-sm">
                                <div className="text-9xl animate-bounce">üéâ</div>
                            </div>
                        )}

                        {/* Overlay Feedback Wrong */}
                        {feedback === 'wrong' && (
                            <div className="absolute inset-0 z-50 flex items-center justify-center bg-black/10 backdrop-blur-sm rounded-2xl animate-shake">
                                <div className="bg-white px-8 py-4 rounded-2xl shadow-2xl border-2 border-red-200">
                                    <span className="text-4xl">‚ùå Coba Lagi</span>
                                </div>
                            </div>
                        )}

                        {/* Two Comparison Boxes */}
                        <div className="grid md:grid-cols-2 gap-8 mb-8">
                            
                            {/* Group A */}
                            <div 
                                onClick={() => handleAnswer('A')}
                                className="relative bg-red-50 rounded-2xl border-2 border-red-100 p-6 flex flex-col items-center cursor-pointer hover:bg-red-100 hover:border-red-300 transition-all card-hover group"
                            >
                                <div className="absolute -top-4 -left-4 bg-red-500 text-white w-10 h-10 rounded-full flex items-center justify-center font-bold text-xl shadow-md border-4 border-white">
                                    A
                                </div>
                                <div className="min-h-[120px] flex items-center justify-center w-full">
                                    {renderItems(currentScenario.groupA.type, currentScenario.groupA.count)}
                                </div>
                                <div className="mt-4 bg-white px-4 py-1 rounded-full text-red-500 font-bold text-sm shadow-sm group-hover:scale-110 transition">
                                    Pilih A
                                </div>
                            </div>

                            {/* Group B */}
                            <div 
                                onClick={() => handleAnswer('B')}
                                className="relative bg-orange-50 rounded-2xl border-2 border-orange-100 p-6 flex flex-col items-center cursor-pointer hover:bg-orange-100 hover:border-orange-300 transition-all card-hover group"
                            >
                                <div className="absolute -top-4 -left-4 bg-orange-500 text-white w-10 h-10 rounded-full flex items-center justify-center font-bold text-xl shadow-md border-4 border-white">
                                    B
                                </div>
                                <div className="min-h-[120px] flex items-center justify-center w-full">
                                    {renderItems(currentScenario.groupB.type, currentScenario.groupB.count)}
                                </div>
                                <div className="mt-4 bg-white px-4 py-1 rounded-full text-orange-500 font-bold text-sm shadow-sm group-hover:scale-110 transition">
                                    Pilih B
                                </div>
                            </div>

                        </div>

                        {/* The Question */}
                        <div className="text-center bg-green-50 rounded-2xl p-6 border-2 border-green-100">
                            <p className="text-gray-500 text-sm font-bold uppercase tracking-wider mb-2">Pertanyaan</p>
                            <h2 className="font-kids text-2xl md:text-3xl text-gray-800 leading-tight">
                                {currentQuestion.text.split("LEBIH").map((part, i) => (
                                    i === 1 ? <span key={i} className="text-green-600 font-black underline decoration-wavy decoration-green-300">LEBIH {part}</span> : part
                                ))}
                            </h2>
                        </div>

                    </div>

                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
